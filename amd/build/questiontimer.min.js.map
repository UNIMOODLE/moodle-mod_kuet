{"version":3,"file":"questiontimer.min.js","sources":["../src/questiontimer.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// Project implemented by the \"Recovery, Transformation and Resilience Plan.\n// Funded by the European Union - Next GenerationEU\".\n//\n// Produced by the UNIMOODLE University Group: Universities of\n// Valladolid, Complutense de Madrid, UPV/EHU, León, Salamanca,\n// Illes Balears, Valencia, Rey Juan Carlos, La Laguna, Zaragoza, Málaga,\n// Córdoba, Extremadura, Vigo, Las Palmas de Gran Canaria y Burgos..\n\n/**\n *\n * @module    mod_kuet/questiontimer\n * @copyright  2023 Proyecto UNIMOODLE {@link https://unimoodle.github.io}\n * @author     UNIMOODLE Group (Coordinator) <direccion.area.estrategia.digital@uva.es>\n * @author     3IPUNT <contacte@tresipunt.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\"use strict\";\n\nimport jQuery from 'jquery';\n\nlet REGION = {\n    PAGE: '[data-region=\"question-content\"]',\n    TIMER: '[data-region=\"question-timer\"]',\n    SECONDS: '[data-region=\"seconds\"]'\n};\n\n/**\n * @constructor\n * @param {String} selector\n */\nfunction QuestionTimer(selector) {\n    this.node = jQuery(selector);\n    this.initTimer();\n}\n\n/** @type {jQuery} The jQuery node for the page region. */\nQuestionTimer.prototype.node = null;\nQuestionTimer.prototype.timeValue = null;\nQuestionTimer.prototype.countDown = null;\nQuestionTimer.prototype.isPaused = false;\nQuestionTimer.prototype.timeFinish = new Event('timeFinish');\n\nQuestionTimer.prototype.initTimer = function() {\n    this.timeValue = this.node.find(REGION.SECONDS).html();\n    this.countDown = setInterval(() => {\n        if (this.timeValue <= 0) {\n            this.node.find(REGION.SECONDS).html(this.timeValue);\n            clearInterval(this.countDown);\n            dispatchEvent(this.timeFinish);\n        } else {\n            this.node.find(REGION.SECONDS).html(this.timeValue);\n        }\n        if (!this.isPaused) {\n            this.timeValue -= 1;\n        }\n    }, 1000);\n    addEventListener('endTimer', () => {\n        clearInterval(this.countDown);\n    }, {once: true});\n    addEventListener('pauseQuestion', () => {\n        this.isPaused = true;\n    }, false);\n    addEventListener('playQuestion', () => {\n        this.isPaused = false;\n    }, false);\n    addEventListener('removeEvents', () => {\n        removeEventListener('endTimer', clearInterval(this.countDown), {once: true});\n    }, {once: true});\n};\n\nexport const initQuestionTimer = (selector) => {\n    return new QuestionTimer(selector);\n};\n"],"names":["REGION","QuestionTimer","selector","node","initTimer","prototype","timeValue","countDown","isPaused","timeFinish","Event","this","find","html","setInterval","clearInterval","dispatchEvent","addEventListener","once","removeEventListener"],"mappings":"+OAoCIA,eAGS,mCAOJC,cAAcC,eACdC,MAAO,mBAAOD,eACdE,YAITH,cAAcI,UAAUF,KAAO,KAC/BF,cAAcI,UAAUC,UAAY,KACpCL,cAAcI,UAAUE,UAAY,KACpCN,cAAcI,UAAUG,UAAW,EACnCP,cAAcI,UAAUI,WAAa,IAAIC,MAAM,cAE/CT,cAAcI,UAAUD,UAAY,gBAC3BE,UAAYK,KAAKR,KAAKS,KAAKZ,gBAAgBa,YAC3CN,UAAYO,aAAY,KACrBH,KAAKL,WAAa,QACbH,KAAKS,KAAKZ,gBAAgBa,KAAKF,KAAKL,WACzCS,cAAcJ,KAAKJ,WACnBS,cAAcL,KAAKF,kBAEdN,KAAKS,KAAKZ,gBAAgBa,KAAKF,KAAKL,WAExCK,KAAKH,gBACDF,WAAa,KAEvB,KACHW,iBAAiB,YAAY,KACzBF,cAAcJ,KAAKJ,aACpB,CAACW,MAAM,IACVD,iBAAiB,iBAAiB,UACzBT,UAAW,KACjB,GACHS,iBAAiB,gBAAgB,UACxBT,UAAW,KACjB,GACHS,iBAAiB,gBAAgB,KAC7BE,oBAAoB,WAAYJ,cAAcJ,KAAKJ,WAAY,CAACW,MAAM,MACvE,CAACA,MAAM,gCAGoBhB,UACvB,IAAID,cAAcC"}