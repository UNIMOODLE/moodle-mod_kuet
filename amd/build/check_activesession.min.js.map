{"version":3,"file":"check_activesession.min.js","sources":["../src/check_activesession.js"],"sourcesContent":["\"use strict\";\n\nimport Ajax from 'core/ajax';\nimport Notification from 'core/notification';\n\nlet SERVICES = {\n    GETACTIVESESSION: 'mod_jqshow_getactivesession'\n};\n\nlet cmId;\nlet jqshowId;\n\n/**\n * @constructor\n * @param {int} cmid\n * @param {int} jqshowid\n */\nfunction CheckActiveSession(cmid, jqshowid) {\n    cmId = cmid;\n    jqshowId = jqshowid;\n    setInterval(this.checkActive, 5000);\n}\n\nCheckActiveSession.prototype.checkActive = function() {\n    let request = {\n        methodname: SERVICES.GETACTIVESESSION,\n        args: {\n            cmid: cmId,\n            jqshowid: jqshowId\n        }\n    };\n    Ajax.call([request])[0].done(function(response) {\n        if (response.active !== 0) {\n            let sessionUrl = new URL(M.cfg.wwwroot + '/mod/jqshow/session.php');\n            sessionUrl.searchParams.set('cmid', cmId);\n            sessionUrl.searchParams.set('sid', response.active);\n            window.location.href = sessionUrl.href;\n        }\n    }).fail(Notification.exception);\n};\n\nexport const checkActiveSession = (cmid, jqshowid) => {\n    return new CheckActiveSession(cmid, jqshowid);\n};\n"],"names":["cmId","jqshowId","SERVICES","CheckActiveSession","cmid","jqshowid","setInterval","this","checkActive","prototype","request","methodname","args","call","done","response","active","sessionUrl","URL","M","cfg","wwwroot","searchParams","set","window","location","href","fail","Notification","exception"],"mappings":"qYASIA,KACAC,SALAC,0BACkB,uCAWbC,mBAAmBC,KAAMC,UAC9BL,KAAOI,KACPH,SAAWI,SACXC,YAAYC,KAAKC,YAAa,KAGlCL,mBAAmBM,UAAUD,YAAc,eACnCE,QAAU,CACVC,WAAYT,0BACZU,KAAM,CACFR,KAAMJ,KACNK,SAAUJ,yBAGbY,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,aACV,IAApBA,SAASC,OAAc,KACnBC,WAAa,IAAIC,IAAIC,EAAEC,IAAIC,QAAU,2BACzCJ,WAAWK,aAAaC,IAAI,OAAQvB,MACpCiB,WAAWK,aAAaC,IAAI,MAAOR,SAASC,QAC5CQ,OAAOC,SAASC,KAAOT,WAAWS,SAEvCC,KAAKC,sBAAaC,wCAGS,CAACzB,KAAMC,WAC9B,IAAIF,mBAAmBC,KAAMC"}