define("mod_jqshow/shortanswer",["exports","jquery","core/ajax","core/templates","core/str","core/notification"],(function(_exports,_jquery,_ajax,_templates,_str,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initShortAnswer=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification);var ACTION_SEND_RESPONSE='[data-action="send-response"]',REGION_CONTENTFEEDBACKS='[data-region="containt-feedbacks"]',REGION_FEEDBACKBACGROUND='[data-region="feedback-background"]',REGION_INPUTANSWER="#userShortAnswer",REGION_ANSWERHELP="#userShortAnswerHelp",questionEnd=!1,showQuestionFeedback=!1,manualMode=!1,strings=[];function ShortAnswer(selector){var showquestionfeedback=arguments.length>1&&void 0!==arguments[1]&&arguments[1],manualmode=arguments.length>2&&void 0!==arguments[2]&&arguments[2],jsonresponse=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.node=(0,_jquery.default)(selector),this.node.attr("data-sid"),this.node.attr("data-cmid"),this.node.attr("data-questionid"),this.node.attr("data-jqshowid"),this.node.attr("data-jqid"),showQuestionFeedback=showquestionfeedback,manualMode=manualmode,questionEnd=!1,""!==jsonresponse&&(this.answered(jsonresponse),(!1===manualMode||(0,_jquery.default)(".modal-body").length)&&(questionEnd=!0,!0===showQuestionFeedback&&this.showFeedback(),this.showAnswers()));(0,_str.get_strings)([{key:"notallowedspecialchars",component:"mod_jqshow"},{key:"notallowedpasting",component:"mod_jqshow"}]).then((function(langStrings){strings=langStrings})).done((function(modal){ShortAnswer.prototype.initShortAnswer()})).fail(_notification.default.exception)}ShortAnswer.prototype.node=null,ShortAnswer.prototype.endTimer=new Event("endTimer"),ShortAnswer.prototype.studentQuestionEnd=new Event("studentQuestionEnd"),ShortAnswer.prototype.initShortAnswer=function(){(0,_jquery.default)(REGION_INPUTANSWER).on("keydown",ShortAnswer.prototype.checkCharacter.bind(this))},ShortAnswer.prototype.checkCharacter=function(e){var key=document.all?e.keyCode:e.which,ctrl=e.ctrlKey?e.ctrlKey:17===key;if(86===key&&ctrl)return(0,_jquery.default)(REGION_ANSWERHELP).text(strings[1]),!1;var finalKey=String.fromCharCode(key);switch(console.log(key,finalKey),key){case 8:case 9:case 192:case 16:case 17:case 18:case 32:case 35:case 37:case 38:case 39:case 40:case 45:case 46:case 91:case 92:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 109:case 110:case 111:case 186:case 187:case 188:case 189:case 190:case 191:return(0,_jquery.default)(REGION_ANSWERHELP).text(""),!0;case 33:case 34:case 219:case 221:case 226:return(0,_jquery.default)(REGION_ANSWERHELP).text(strings[0]),!1}var filter="abcdefghijklmnñopqrstuvwxyzABCDEFGHIJKLMNÑOPQRSTUVWXYZ1234567890()&%$@ºª€=[];:',._-Çç";return console.log(finalKey,filter.indexOf(finalKey)>0),filter.indexOf(finalKey)>0?((0,_jquery.default)(REGION_ANSWERHELP).text(""),!0):((0,_jquery.default)(REGION_ANSWERHELP).text(strings[0]),!1)},ShortAnswer.prototype.answered=function(jsonresponse){questionEnd=!0,(0,_jquery.default)(ACTION_SEND_RESPONSE).addClass("d-none"),(0,_jquery.default)(REGION_FEEDBACKBACGROUND).css("display","block"),(0,_jquery.default)(REGION_INPUTANSWER).css("z-index",3).attr("disabled","disabled")},ShortAnswer.prototype.showFeedback=function(){!0===questionEnd&&(0,_jquery.default)(REGION_CONTENTFEEDBACKS).css({display:"block","z-index":3})},ShortAnswer.prototype.showAnswers=function(){};_exports.initShortAnswer=function(selector,showquestionfeedback,manualmode,jsonresponse){return new ShortAnswer(selector,showquestionfeedback,manualmode,jsonresponse)}}));

//# sourceMappingURL=shortanswer.min.js.map