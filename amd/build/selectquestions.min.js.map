{"version":3,"file":"selectquestions.min.js","sources":["../src/selectquestions.js"],"sourcesContent":["\"use strict\";\n/* eslint-disable no-unused-vars */ // TODO remove.\n\nimport jQuery from 'jquery';\n\nlet ACTION = {\n    ADDQUESTIONS: '[data-action=\"add_questions\"]',\n    ADDQUESTION: '[data-action=\"add_question\"]',\n    SELECTALL: '#selectall',\n    SELECTVISIBLES: '#selectvisibles',\n};\n\nlet REGION = {\n    NUMBERSELECT: '#number_select',\n    SELECTQUESTION: '.select_question',\n    CONTENTQUESTIONS: '#content_questions',\n    PAGENAVIGATION: '#page_navigation',\n    CURRENTPAGE: '#current_page'\n};\n\nlet cmId;\nlet sId;\nlet showPerPage = 20;\n\n/**\n * @constructor\n * @param {String} selector The selector for the page region containing the page.\n */\nfunction SelectQuestions(selector) {\n    this.node = jQuery(selector);\n    sId = this.node.attr('data-sid');\n    cmId = this.node.attr('data-cmid');\n    this.initPanel();\n}\n\n/** @type {jQuery} The jQuery node for the page region. */\nSelectQuestions.prototype.node = null;\n\nSelectQuestions.prototype.initPanel = function() {\n    this.node.find(ACTION.SELECTALL).on('change', this.selectAll.bind(this));\n    this.node.find(ACTION.SELECTVISIBLES).on('change', this.selectVisibles.bind(this));\n    this.node.find(ACTION.ADDQUESTIONS).on('click', this.addQuestions);\n    this.node.find(ACTION.ADDQUESTION).on('click', this.addQuestion);\n    this.node.find(REGION.SELECTQUESTION).on('change', this.selectQuestion.bind(this));\n    this.countChecks();\n    this.pagination();\n};\n\nSelectQuestions.prototype.selectAll = function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.node.find(REGION.SELECTQUESTION).prop('checked', jQuery(e.currentTarget).is(':checked'));\n    this.countChecks();\n};\n\nSelectQuestions.prototype.selectVisibles = function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.node.find('[style=\"display: flex;\"] ' + REGION.SELECTQUESTION).prop('checked', jQuery(e.currentTarget).is(':checked'));\n    this.countChecks();\n};\n\nSelectQuestions.prototype.addQuestions = function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    alert('addQuestions ');\n};\n\nSelectQuestions.prototype.addQuestion = function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let questionId = jQuery(e.currentTarget).attr('data-questionnid');\n    alert('addQuestion ' + questionId);\n};\n\nSelectQuestions.prototype.selectQuestion = function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.countChecks();\n};\n\nSelectQuestions.prototype.countChecks = function(e) {\n    // TODO change for datastorage, para poder contabilizar todos los marcados tras la paginaciÃ³n.\n    jQuery(REGION.NUMBERSELECT).html(jQuery(REGION.SELECTQUESTION + ':checked').length);\n};\n\nSelectQuestions.prototype.pagination = function() {\n    let numberOfItems = jQuery(REGION.CONTENTQUESTIONS).children().length;\n    let numberOfPages = Math.ceil(numberOfItems / showPerPage);\n    jQuery(REGION.CURRENTPAGE).val(0);\n    let navigationHtml = '';\n    let currentLink = 0;\n    if (numberOfPages > 1) {\n        while (numberOfPages > currentLink) {\n            navigationHtml +=\n                '<div class=\"page-item\" data-goto=\"' + currentLink + '\">' +\n                    '<span class=\"page-link\">' + (currentLink + 1) + '</span>' +\n                '</div>';\n            currentLink++;\n        }\n    } else {\n        jQuery(ACTION.SELECTVISIBLES).remove();\n        jQuery('label[for=\"selectvisibles\"]').remove();\n    }\n    jQuery(REGION.PAGENAVIGATION).html(navigationHtml);\n    this.node.find('.page-item').on('click', this.goToPage);\n    jQuery(REGION.PAGENAVIGATION + ' .page-item:first').addClass('active');\n    jQuery(REGION.CONTENTQUESTIONS).children().css('display', 'none');\n    jQuery(REGION.CONTENTQUESTIONS).children().slice(0, showPerPage).css('display', 'flex');\n};\n\nSelectQuestions.prototype.goToPage = function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let gotTo = jQuery(e.currentTarget).attr('data-goto');\n    let startFrom = gotTo * showPerPage;\n    let endOn = startFrom + showPerPage;\n    jQuery(REGION.CONTENTQUESTIONS).children().css('display', 'none').slice(startFrom, endOn).css('display', 'flex');\n    jQuery('.page-item[data-goto=' + gotTo + ']').addClass('active').siblings('.active').removeClass('active');\n    jQuery(ACTION.SELECTVISIBLES).prop('checked', false);\n    jQuery(REGION.CURRENTPAGE).val(gotTo);\n};\n\nexport const initSelectQuestions = (selector) => {\n    return new SelectQuestions(selector);\n};\n"],"names":["obj","Object","defineProperty","_exports","value","initSelectQuestions","_jquery","__esModule","default","ACTION","REGION","SelectQuestions","selector","this","node","jQuery","attr","initPanel","prototype","find","on","selectAll","bind","selectVisibles","addQuestions","addQuestion","selectQuestion","countChecks","pagination","e","preventDefault","stopPropagation","prop","currentTarget","is","alert","questionId","html","length","numberOfItems","children","numberOfPages","Math","ceil","val","navigationHtml","currentLink","remove","goToPage","addClass","css","slice","gotTo","startFrom","endOn","siblings","removeClass"],"mappings":"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"}