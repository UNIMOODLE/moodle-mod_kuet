define("mod_kuet/teachercontrolpanel",["exports","jquery","core/str","core/notification","core/modal_factory","core/modal_events"],(function(_exports,_jquery,_str,_notification,_modal_factory,_modal_events){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.teacherControlPanel=void 0,_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);var REGION_JUMPTOINPUT='[data-input="jumpto"]',REGION_SWITCHS=".showhide-action",REGION_IMPROVISE=".special-action.improvise-question",ACTION_NEXT='[data-action="next"]',ACTION_PAUSE='[data-action="pause"]',ACTION_PLAY='[data-action="play"]',ACTION_RESEND='[data-action="resend"]',ACTION_JUMP='[data-action="jump"]',ACTION_FINISHQUESTION='[data-action="finishquestion"]',ACTION_SHOWHIDE_RESPONSES='[data-action="showhide_responses"]',ACTION_SHOWHIDE_STATISTICS='[data-action="showhide_statistics"]',ACTION_SHOWHIDE_FEEDBACK='[data-action="showhide_feedback"]',ACTION_IMPROVISE='[data-action="improvise"]',ACTION_VOTE='[data-action="vote"]',ACTION_ENDSESSION='[data-action="endsession"]',ACTION_COLLAPSE=".teacher-control-panel-collapse";function TeacherControlPanel(region,jqid){this.root=(0,_jquery.default)(region),this.jqid=jqid,this.initControlPanel(),new Event("teacherQuestionEnd_"+this.jqid)}TeacherControlPanel.prototype.root=null,TeacherControlPanel.prototype.jqid=null;var nextEvent=new Event("nextQuestion"),pauseEvent=new Event("pauseQuestionSelf"),playEvent=new Event("playQuestionSelf"),resendEvent=new Event("resendSelf"),finishquestionEventSelf=new Event("teacherQuestionEndSelf"),endSession=new Event("endSession"),showAnswers=new Event("showAnswersSelf"),hideAnswers=new Event("hideAnswersSelf"),showStatistics=new Event("showStatisticsSelf"),hideStatistics=new Event("hideStatisticsSelf"),showFeedback=new Event("showFeedbackSelf"),hideFeedback=new Event("hideFeedbackSelf"),improvise=new Event("improvise"),vote=new Event("initVote");TeacherControlPanel.prototype.initControlPanel=function(){this.root.find(ACTION_NEXT).on("click",this.next),this.root.find(ACTION_PAUSE).on("click",this.pause),this.root.find(ACTION_PLAY).on("click",this.play),this.root.find(ACTION_RESEND).on("click",this.resend),this.root.find(ACTION_JUMP).on("click",this.jump),this.root.find(REGION_JUMPTOINPUT).on("keyup",(function(e){"Enter"!==e.key&&13!==e.keyCode||TeacherControlPanel.prototype.jump()})),this.root.find(ACTION_FINISHQUESTION).on("click",this.finishquestion),this.root.find(ACTION_ENDSESSION).on("click",this.endsession),this.root.find(ACTION_SHOWHIDE_RESPONSES).on("click",(function(e){(0,_jquery.default)(ACTION_SHOWHIDE_RESPONSES).is(":checked")?TeacherControlPanel.prototype.showAnswers():TeacherControlPanel.prototype.hideAnswers()})),this.root.find(ACTION_SHOWHIDE_STATISTICS).on("click",(function(){(0,_jquery.default)(ACTION_SHOWHIDE_STATISTICS).is(":checked")?TeacherControlPanel.prototype.showStatistics():TeacherControlPanel.prototype.hideStatistics()})),this.root.find(ACTION_SHOWHIDE_FEEDBACK).on("click",(function(){(0,_jquery.default)(ACTION_SHOWHIDE_FEEDBACK).is(":checked")?TeacherControlPanel.prototype.showFeedback():TeacherControlPanel.prototype.hideFeedback()})),this.root.find(ACTION_IMPROVISE).on("click",(function(){TeacherControlPanel.prototype.improvise()})),this.root.find(ACTION_VOTE).on("click",(function(){TeacherControlPanel.prototype.vote()})),(0,_jquery.default)(ACTION_COLLAPSE).on("click",(function(){setTimeout((function(){0!==(0,_jquery.default)(ACTION_COLLAPSE+".collapsed").length?(0,_jquery.default)(".content-raceresults").animate({width:"100%"},400).css({width:"100%"}):(0,_jquery.default)(".content-raceresults").animate({width:(0,_jquery.default)(".question-body").width()-260+"px"},400).css({width:"calc(100% - 260px)"})}),100)}))},TeacherControlPanel.prototype.next=function(){dispatchEvent(nextEvent)},TeacherControlPanel.prototype.pause=function(){dispatchEvent(pauseEvent),(0,_jquery.default)(ACTION_PAUSE).addClass("d-none"),(0,_jquery.default)(ACTION_PLAY).removeClass("d-none")},TeacherControlPanel.prototype.play=function(e){dispatchEvent(playEvent),(0,_jquery.default)(ACTION_PAUSE).removeClass("d-none"),(0,_jquery.default)(ACTION_PLAY).addClass("d-none")},TeacherControlPanel.prototype.resend=function(){dispatchEvent(resendEvent)},TeacherControlPanel.prototype.jump=function(){var numquestion=(0,_jquery.default)(REGION_JUMPTOINPUT).data("numquestions"),value=(0,_jquery.default)(REGION_JUMPTOINPUT).val();if(value>numquestion||value<1){var stringkeys=[{key:"jump",component:"mod_kuet"},{key:"jumpto_error",component:"mod_kuet",param:numquestion},{key:"confirm",component:"mod_kuet"}];(0,_str.get_strings)(stringkeys).then((function(langStrings){return _modal_factory.default.create({title:langStrings[0],body:langStrings[1],type:_modal_factory.default.types.CANCEL}).then((function(modal){return modal.getRoot().on(_modal_events.default.hidden,(function(){(0,_jquery.default)(REGION_JUMPTOINPUT).val(""),modal.destroy()})),modal}))})).done((function(modal){modal.show()})).fail(_notification.default.exception)}else{var jumpEvent=new CustomEvent("jumpTo",{detail:{jumpTo:value}});dispatchEvent(jumpEvent)}},TeacherControlPanel.prototype.finishquestion=function(){dispatchEvent(finishquestionEventSelf),!0,(0,_jquery.default)(REGION_SWITCHS).removeClass("disabled"),(0,_jquery.default)(REGION_IMPROVISE).removeClass("disabled"),(0,_jquery.default)(ACTION_FINISHQUESTION).addClass("d-none"),(0,_jquery.default)(ACTION_NEXT).removeClass("d-none")},TeacherControlPanel.prototype.showAnswers=function(){dispatchEvent(showAnswers)},TeacherControlPanel.prototype.hideAnswers=function(){dispatchEvent(hideAnswers)},TeacherControlPanel.prototype.showStatistics=function(){dispatchEvent(showStatistics)},TeacherControlPanel.prototype.hideStatistics=function(){dispatchEvent(hideStatistics)},TeacherControlPanel.prototype.showFeedback=function(){dispatchEvent(showFeedback)},TeacherControlPanel.prototype.hideFeedback=function(){dispatchEvent(hideFeedback)},TeacherControlPanel.prototype.improvise=function(){dispatchEvent(improvise)},TeacherControlPanel.prototype.vote=function(){dispatchEvent(vote)},TeacherControlPanel.prototype.endsession=function(){dispatchEvent(endSession)};_exports.teacherControlPanel=function(region,jqid){return new TeacherControlPanel(region,jqid)}}));

//# sourceMappingURL=teachercontrolpanel.min.js.map