define("mod_jqshow/sessionspanel_",["jquery","core/str","core/ajax","core/modal_factory","core/modal_events","core/templates"],(function($,Str,Ajax,ModalFactory,ModalEvents,Templates){var cmId,courseId,ACTION_COPYSESSION='[data-action="copy_session"]',SERVICES_COPYSESSION="mod_jqshow_copysession",REGION_SESSIONPANEL='[data-region="sessions-panel"]',TEMPLATES_LOADING="core/overlay_loading";function SessionsPanel(selector){this.node=$(selector),courseId=this.node.attr("data-courseid"),cmId=this.node.attr("data-cmid"),this.initPanel()}return SessionsPanel.prototype.node=null,SessionsPanel.prototype.initPanel=function(){this.node.find(ACTION_COPYSESSION).on("click",this.copySession)},SessionsPanel.prototype.copySession=function(e){e.preventDefault(),e.stopPropagation();var sessionId=$(e.currentTarget).attr("data-sessionid");console.log(sessionId,courseId,cmId);Str.get_strings([{key:"copysession",component:"mod_jqshow"},{key:"copysession_desc",component:"mod_jqshow"},{key:"confirm",component:"mod_jqshow"}]).then((function(langStrings){var title=langStrings[0],confirmMessage=langStrings[1],buttonText=langStrings[2];return ModalFactory.create({title:title,body:confirmMessage,type:ModalFactory.types.SAVE_CANCEL}).then((function(modal){return modal.setSaveButtonText(buttonText),modal.getRoot().on(ModalEvents.save,(function(){Templates.render(TEMPLATES_LOADING,{visible:!0}).done((function(html){$(REGION_SESSIONPANEL).append(html);var request={methodname:SERVICES_COPYSESSION,args:{courseid:courseId,cmid:cmId,sessionid:sessionId}};Ajax.call([request])[0].done((function(){alert("llamar al servicio de reload template")}))}))})),modal.getRoot().on(ModalEvents.hidden,(function(){modal.destroy()})),modal}))})).done((function(modal){modal.show()})).fail(Notification.exception)},{initSessionsPanel:function(selector){return new SessionsPanel(selector)}}}));

//# sourceMappingURL=sessionspanel_.min.js.map