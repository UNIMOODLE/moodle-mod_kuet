define("mod_jqshow/selectquestions",["exports","jquery"],(function(_exports,_jquery){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initSelectQuestions=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};var ACTION_ADDQUESTIONS='[data-action="add_questions"]',ACTION_ADDQUESTION='[data-action="add_question"]',ACTION_SELECTALL="#selectall",ACTION_SELECTVISIBLES="#selectvisibles",REGION_NUMBERSELECT="#number_select",REGION_SELECTQUESTION=".select_question",REGION_CONTENTQUESTIONS="#content_questions",REGION_PAGENAVIGATION="#page_navigation",REGION_CURRENTPAGE="#current_page";function SelectQuestions(selector){this.node=(0,_jquery.default)(selector),this.node.attr("data-sid"),this.node.attr("data-cmid"),this.initPanel()}SelectQuestions.prototype.node=null,SelectQuestions.prototype.initPanel=function(){this.node.find(ACTION_SELECTALL).on("change",this.selectAll.bind(this)),this.node.find(ACTION_SELECTVISIBLES).on("change",this.selectVisibles.bind(this)),this.node.find(ACTION_ADDQUESTIONS).on("click",this.addQuestions),this.node.find(ACTION_ADDQUESTION).on("click",this.addQuestion),this.node.find(REGION_SELECTQUESTION).on("change",this.selectQuestion.bind(this)),this.countChecks(),this.pagination()},SelectQuestions.prototype.selectAll=function(e){e.preventDefault(),e.stopPropagation(),this.node.find(REGION_SELECTQUESTION).prop("checked",(0,_jquery.default)(e.currentTarget).is(":checked")),this.countChecks()},SelectQuestions.prototype.selectVisibles=function(e){e.preventDefault(),e.stopPropagation(),this.node.find('[style="display: flex;"] '+REGION_SELECTQUESTION).prop("checked",(0,_jquery.default)(e.currentTarget).is(":checked")),this.countChecks()},SelectQuestions.prototype.addQuestions=function(e){e.preventDefault(),e.stopPropagation(),alert("addQuestions ")},SelectQuestions.prototype.addQuestion=function(e){e.preventDefault(),e.stopPropagation();var questionId=(0,_jquery.default)(e.currentTarget).attr("data-questionnid");alert("addQuestion "+questionId)},SelectQuestions.prototype.selectQuestion=function(e){e.preventDefault(),e.stopPropagation(),this.countChecks()},SelectQuestions.prototype.countChecks=function(e){(0,_jquery.default)(REGION_NUMBERSELECT).html((0,_jquery.default)(REGION_SELECTQUESTION+":checked").length)},SelectQuestions.prototype.pagination=function(){var numberOfItems=(0,_jquery.default)(REGION_CONTENTQUESTIONS).children().length,numberOfPages=Math.ceil(numberOfItems/20);(0,_jquery.default)(REGION_CURRENTPAGE).val(0);var navigationHtml="",currentLink=0;if(numberOfPages>1)for(;numberOfPages>currentLink;)navigationHtml+='<div class="page-item" data-goto="'+currentLink+'"><span class="page-link">'+(currentLink+1)+"</span></div>",currentLink++;else(0,_jquery.default)(ACTION_SELECTVISIBLES).remove(),(0,_jquery.default)('label[for="selectvisibles"]').remove();(0,_jquery.default)(REGION_PAGENAVIGATION).html(navigationHtml),this.node.find(".page-item").on("click",this.goToPage),(0,_jquery.default)(REGION_PAGENAVIGATION+" .page-item:first").addClass("active"),(0,_jquery.default)(REGION_CONTENTQUESTIONS).children().css("display","none"),(0,_jquery.default)(REGION_CONTENTQUESTIONS).children().slice(0,20).css("display","flex")},SelectQuestions.prototype.goToPage=function(e){e.preventDefault(),e.stopPropagation();var gotTo=(0,_jquery.default)(e.currentTarget).attr("data-goto"),startFrom=20*gotTo,endOn=startFrom+20;(0,_jquery.default)(REGION_CONTENTQUESTIONS).children().css("display","none").slice(startFrom,endOn).css("display","flex"),(0,_jquery.default)(".page-item[data-goto="+gotTo+"]").addClass("active").siblings(".active").removeClass("active"),(0,_jquery.default)(ACTION_SELECTVISIBLES).prop("checked",!1),(0,_jquery.default)(REGION_CURRENTPAGE).val(gotTo)};_exports.initSelectQuestions=function(selector){return new SelectQuestions(selector)}}));

//# sourceMappingURL=selectquestions.min.js.map