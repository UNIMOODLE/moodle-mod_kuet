{"version":3,"file":"teacher_programmedmode.min.js","sources":["../src/teacher_programmedmode.js"],"sourcesContent":["\"use strict\";\n/* eslint-disable no-unused-vars */ // TODO remove.\n\nimport jQuery from 'jquery';\nimport Ajax from 'core/ajax';\nimport Templates from 'core/templates';\nimport Notification from 'core/notification';\n\nlet REGION = {\n    LISTRESULTS: '[data-region=\"list-results\"]'\n};\n\nlet SERVICES = {\n    GETLISTRESULTS: 'mod_jqshow_getlistresults'\n};\n\nlet TEMPLATES = {\n    LOADING: 'core/overlay_loading',\n    LISTRESULTS: 'mod_jqshow/session/listresults'\n};\n\nlet cmId;\nlet sId;\n\n/**\n * @constructor\n * @param {String} selector\n */\nfunction ProgrammedMode(selector) {\n    this.node = jQuery(selector);\n    this.initProgrammedMode();\n}\n\n/** @type {jQuery} The jQuery node for the page region. */\nProgrammedMode.prototype.node = null;\n\nProgrammedMode.prototype.initProgrammedMode = function() {\n    sId = this.node.attr('data-sid');\n    cmId = this.node.attr('data-cmid');\n    setInterval(this.reloadList, 20000);\n};\n\nProgrammedMode.prototype.reloadList = function() {\n    Templates.render(TEMPLATES.LOADING, {visible: true}).done(function(html) {\n        let identifier = jQuery(REGION.LISTRESULTS);\n        identifier.append(html);\n        let request = {\n            methodname: SERVICES.GETLISTRESULTS,\n            args: {\n                sid: sId,\n                cmid: cmId\n            }\n        };\n        Ajax.call([request])[0].done(function(response) {\n            // eslint-disable-next-line promise/always-return\n            Templates.render(TEMPLATES.LISTRESULTS, response).then((html) => {\n                identifier.html(html);\n            }).fail(Notification.exception);\n        }).fail(Notification.exception);\n    });\n};\n\nexport const initProgrammedMode = (selector) => {\n    return new ProgrammedMode(selector);\n};\n"],"names":["_interopRequireDefault","obj","__esModule","default","Object","defineProperty","_exports","value","initProgrammedMode","_jquery","_ajax","_templates","_notification","cmId","sId","REGION","SERVICES","TEMPLATES","ProgrammedMode","selector","this","node","jQuery","prototype","attr","setInterval","reloadList","Templates","render","visible","done","html","identifier","append","request","methodname","args","sid","cmid","Ajax","call","response","then","fail","Notification","exception"],"mappings":"4KAM6C,SAAAA,uBAAAC,KAAAA,OAAAA,KAAAA,IAAAC,WAAAD,IAAAE,CAAAA,QAAAF,IAAA,CANhCG,OAAAC,eAAAC,SAAA,aAAA,CAAAC,OAAA,IAAAD,SAAAE,wBAAA,EAGbC,QAAAT,uBAAAS,SACAC,MAAAV,uBAAAU,OACAC,WAAAX,uBAAAW,YACAC,cAAAZ,uBAAAY,eAEA,IAaIC,KACAC,IAdAC,mBACa,+BAGbC,wBACgB,4BAGhBC,kBACS,uBADTA,sBAEa,iCAUjB,SAASC,eAAeC,UACpBC,KAAKC,MAAO,EAAAC,QAAMnB,SAACgB,UACnBC,KAAKZ,oBACT,CAGAU,eAAeK,UAAUF,KAAO,KAEhCH,eAAeK,UAAUf,mBAAqB,WAC1CM,IAAMM,KAAKC,KAAKG,KAAK,YACrBX,KAAOO,KAAKC,KAAKG,KAAK,aACtBC,YAAYL,KAAKM,WAAY,MAGjCR,eAAeK,UAAUG,WAAa,WAClCC,WAAAA,QAAUC,OAAOX,kBAAmB,CAACY,SAAS,IAAOC,MAAK,SAASC,MAC/D,IAAIC,YAAa,EAAAV,QAAAA,SAAOP,oBACxBiB,WAAWC,OAAOF,MAClB,IAAIG,QAAU,CACVC,WAAYnB,wBACZoB,KAAM,CACFC,IAAKvB,IACLwB,KAAMzB,OAGd0B,MAAAA,QAAKC,KAAK,CAACN,UAAU,GAAGJ,MAAK,SAASW,UAElCd,WAAAA,QAAUC,OAAOX,sBAAuBwB,UAAUC,MAAK,SAACX,MACpDC,WAAWD,KAAKA,KACnB,IAAEY,KAAKC,cAAYzC,QAAC0C,UACxB,IAAEF,KAAKC,cAAYzC,QAAC0C,UACzB,KAKFvC,SAAAE,mBAFgC,SAACW,UAC/B,OAAO,IAAID,eAAeC,UAC5B"}