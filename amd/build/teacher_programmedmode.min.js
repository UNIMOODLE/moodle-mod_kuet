define("mod_jqshow/teacher_programmedmode",["exports","jquery","core/ajax","core/templates","core/notification"],(function(_exports,_jquery,_ajax,_templates,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initProgrammedMode=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification);let cmId,sId,REGION_LISTRESULTS='[data-region="list-results"]',SERVICES_GETLISTRESULTS="mod_jqshow_getlistresults",TEMPLATES_LOADING="core/overlay_loading",TEMPLATES_LISTRESULTS="mod_jqshow/session/listresults";function ProgrammedMode(selector){this.node=(0,_jquery.default)(selector),this.initProgrammedMode()}ProgrammedMode.prototype.node=null,ProgrammedMode.prototype.initProgrammedMode=function(){sId=this.node.attr("data-sid"),cmId=this.node.attr("data-cmid"),setInterval(this.reloadList,2e4)},ProgrammedMode.prototype.reloadList=function(){_templates.default.render(TEMPLATES_LOADING,{visible:!0}).done((function(html){let identifier=(0,_jquery.default)(REGION_LISTRESULTS);identifier.append(html);let request={methodname:SERVICES_GETLISTRESULTS,args:{sid:sId,cmid:cmId}};_ajax.default.call([request])[0].done((function(response){_templates.default.render(TEMPLATES_LISTRESULTS,response).then((html=>{identifier.html(html)})).fail(_notification.default.exception)})).fail(_notification.default.exception)}))};_exports.initProgrammedMode=selector=>new ProgrammedMode(selector)}));

//# sourceMappingURL=teacher_programmedmode.min.js.map